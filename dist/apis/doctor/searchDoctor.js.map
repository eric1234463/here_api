{"version":3,"sources":["../../../src/apis/doctor/searchDoctor.js"],"names":["searchDoctor","req","res","next","order","condition","where","include","model","District","Specialty","body","search","district_id","$eq","sort","push","Doctor","findAll","then","json","doctor"],"mappings":";;;;;kBAEwBA,Y;;AAFxB;;;;;;AAEe,SAASA,YAAT,CAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,IAAhC,EAAsC;AACnD,MAAIC,QAAQ,CAAC,CAAC,IAAD,EAAO,KAAP,CAAD,CAAZ;AACA,MAAIC,YAAY;AACdD,WAAOA,KADO;AAEdE,WAAO,EAFO;AAGdC,aAAS,CAAC,EAAEC,OAAO,iBAAOC,QAAhB,EAAD,EAA6B,EAAED,OAAO,iBAAOE,SAAhB,EAA7B;AAHK,GAAhB;;AAMA,MAAI,CAAC,CAACT,IAAIU,IAAJ,CAASC,MAAT,CAAgBC,WAAtB,EAAmC;AACjCR,cAAU,OAAV,EAAmB,aAAnB,IAAoC;AAClCS,WAAKb,IAAIU,IAAJ,CAASC,MAAT,CAAgBC;AADa,KAApC;AAGD;;AAED,MAAI,CAAC,CAACZ,IAAIU,IAAJ,CAASI,IAAf,EAAqB;AACnBV,cAAUD,KAAV,GAAkB,EAAlB;AACAC,cAAUD,KAAV,CAAgBY,IAAhB,CAAqBf,IAAIU,IAAJ,CAASI,IAA9B;AACD;;AAED,mBAAOE,MAAP,CAAcC,OAAd,CAAsBb,SAAtB,EAAiCc,IAAjC,CAAsC,kBAAU;AAC9CjB,QAAIkB,IAAJ,CAASC,MAAT;AACD,GAFD;AAGD","file":"searchDoctor.js","sourcesContent":["import models from \"../../../models\";\n\nexport default function searchDoctor(req, res, next) {\n  let order = [[\"id\", \"ASC\"]];\n  let condition = {\n    order: order,\n    where: {},\n    include: [{ model: models.District }, { model: models.Specialty }]\n  };\n\n  if (!!req.body.search.district_id) {\n    condition[\"where\"][\"district_id\"] = {\n      $eq: req.body.search.district_id\n    };\n  }\n\n  if (!!req.body.sort) {\n    condition.order = [];\n    condition.order.push(req.body.sort);\n  }\n\n  models.Doctor.findAll(condition).then(doctor => {\n    res.json(doctor);\n  });\n}\n"]}