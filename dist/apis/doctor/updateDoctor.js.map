{"version":3,"sources":["../../../src/apis/doctor/updateDoctor.js"],"names":["req","res","next","url","body","location","get","geocoding","google_lat","google_lng","results","length","geometry","lat","lng","Doctor","update","displayName","age","gender","about","telphone","where","id","params","then","json","user","updateDoctor"],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;;sFAEe,iBAA4BA,GAA5B,EAAiCC,GAAjC,EAAsCC,IAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAETC,eAFS,kEAE0DH,IAAII,IAAJ,CAASC,QAFnE;AAAA;AAAA,mBAGW,gBAAMC,GAAN,CAAUH,GAAV,CAHX;;AAAA;AAGPI,qBAHO;AAITC,sBAJS,GAII,CAJJ;AAKTC,sBALS,GAKI,CALJ;;AAMb,gBAAIF,UAAUG,OAAV,CAAkBC,MAAlB,GAA2B,CAA/B,EAAkC;AAChCH,2BAAaD,UAAUG,OAAV,CAAkB,CAAlB,EAAqBE,QAArB,CAA8BP,QAA9B,CAAuCQ,GAApD;AACAJ,2BAAaF,UAAUG,OAAV,CAAkB,CAAlB,EAAqBE,QAArB,CAA8BP,QAA9B,CAAuCS,GAApD;AACD;AACD,6BAAOC,MAAP,CAAcC,MAAd,CACE;AACEC,2BAAajB,IAAII,IAAJ,CAASa,WADxB;AAEEC,mBAAKlB,IAAII,IAAJ,CAASc,GAFhB;AAGEC,sBAAQnB,IAAII,IAAJ,CAASe,MAHnB;AAIEd,wBAAUL,IAAII,IAAJ,CAASC,QAJrB;AAKEe,qBAAOpB,IAAII,IAAJ,CAASgB,KALlB;AAMEC,wBAAUrB,IAAII,IAAJ,CAASiB,QANrB;AAOEb,0BAAYA,UAPd;AAQEC,0BAAYA;AARd,aADF,EAWE;AACEa,qBAAO;AACLC,oBAAIvB,IAAIwB,MAAJ,CAAWD;AADV;AADT,aAXF,EAgBEE,IAhBF,CAgBO,gBAAQ;AACbxB,kBAAIyB,IAAJ,CAASC,IAAT;AACD,aAlBD;;AAVa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAeC,Y;;;;SAAAA,Y","file":"updateDoctor.js","sourcesContent":["import models from \"../../../models\";\nimport axios from 'axios';\n\nexport default async function updateDoctor(req, res, next) {\n\n  let url = `https://maps.googleapis.com/maps/api/geocode/json?address=${req.body.location}&key=AIzaSyDWRykKh_AkmGvt8RzH_zkpdUhrWh4SJLc`;\n  const geocoding = await axios.get(url);\n  let google_lat = 0;\n  let google_lng = 0;\n  if (geocoding.results.length > 0) {\n    google_lat = geocoding.results[0].geometry.location.lat;\n    google_lng = geocoding.results[0].geometry.location.lng;\n  }\n  models.Doctor.update(\n    {\n      displayName: req.body.displayName,\n      age: req.body.age,\n      gender: req.body.gender,\n      location: req.body.location,\n      about: req.body.about,\n      telphone: req.body.telphone,\n      google_lat: google_lat,\n      google_lng: google_lng\n    },\n    {\n      where: {\n        id: req.params.id\n      }\n    }\n  ).then(user => {\n    res.json(user);\n  });\n}\n"]}