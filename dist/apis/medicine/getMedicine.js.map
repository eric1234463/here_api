{"version":3,"sources":["../../../src/apis/medicine/getMedicine.js"],"names":["req","res","next","Medicine","findOne","where","id","params","medicine","hasBan","query","patientId","PatientMedicine","medicine_id","patient_id","patientMedicine","result","json","getMedicine"],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;;sFAEe,iBAA2BA,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACU,iBAAOC,QAAP,CAAgBC,OAAhB,CAAwB;AAC7CC,qBAAO;AACLC,oBAAIN,IAAIO,MAAJ,CAAWD;AADV;AADsC,aAAxB,CADV;;AAAA;AACPE,oBADO;AAMTC,kBANS,GAMA,KANA;;AAAA,iBAOTT,IAAIU,KAAJ,CAAUC,SAPD;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAQmB,iBAAOC,eAAP,CAAuBR,OAAvB,CAA+B;AAC3DC,qBAAO;AACLQ,6BAAab,IAAIO,MAAJ,CAAWD,EADnB;AAELQ,4BAAYd,IAAIU,KAAJ,CAAUC;AAFjB;AADoD,aAA/B,CARnB;;AAAA;AAQLI,2BARK;;;AAeX,gBAAIA,eAAJ,EAAqB;AACnBN,uBAAS,IAAT;AACD;;AAjBU;AAoBPO,kBApBO,GAoBE;AACbR,gCADa;AAEbC;AAFa,aApBF;;AAwBbR,gBAAIgB,IAAJ,CAASD,MAAT;;AAxBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAeE,W;;;;SAAAA,W","file":"getMedicine.js","sourcesContent":["import models from \"../../../models\";\n\nexport default async function getMedicine(req, res, next) {\n  const medicine = await models.Medicine.findOne({\n    where: {\n      id: req.params.id\n    }\n  });\n  let hasBan = false;\n  if (req.query.patientId) {\n    const patientMedicine = await models.PatientMedicine.findOne({\n      where: {\n        medicine_id: req.params.id,\n        patient_id: req.query.patientId\n      }\n    });\n\n    if (patientMedicine) {\n      hasBan = true;\n    }\n  }\n\n  const result = {\n    medicine,\n    hasBan\n  }\n  res.json(result);\n}\n"]}