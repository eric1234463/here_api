{"version":3,"sources":["../../../src/apis/patient/createWalkingStep.js"],"names":["createWalkingStep","req","res","next","value","patientId","body","date","step","distance","patientWalkingStep","findOne","where","then","obj","update","json","status","create"],"mappings":";;;;;kBAEwBA,iB;;AAFxB;;;;;;AAEe,SAASA,iBAAT,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C;AACxD,MAAIC,QAAQ;AACVC,eAAWJ,IAAIK,IAAJ,CAASD,SADV;AAEVE,UAAMN,IAAIK,IAAJ,CAASC,IAFL;AAGVH,WAAOH,IAAIK,IAAJ,CAASE,IAHN;AAIVC,cAAUR,IAAIK,IAAJ,CAASG;AAJT,GAAZ;AAMA,mBAAOC,kBAAP,CACGC,OADH,CACW;AACPC,WAAO;AACLP,iBAAWJ,IAAIK,IAAJ,CAASD,SADf;AAELE,YAAMN,IAAIK,IAAJ,CAASC;AAFV;AADA,GADX,EAOGM,IAPH,CAOQ,UAASC,GAAT,EAAc;AAClB,QAAIA,GAAJ,EAAS;AACP;AACAA,UAAIC,MAAJ,CAAWX,KAAX;AACAF,UAAIc,IAAJ,CAAS;AACPC,gBAAQ;AADD,OAAT;AAGD,KAND,MAMO;AACL;AACA,uBAAOP,kBAAP,CAA0BQ,MAA1B,CAAiCd,KAAjC;AACAF,UAAIc,IAAJ,CAAS;AACPC,gBAAQ;AADD,OAAT;AAGD;AACF,GArBH;AAsBD","file":"createWalkingStep.js","sourcesContent":["import models from \"../../../models\";\n\nexport default function createWalkingStep(req, res, next) {\n  let value = {\n    patientId: req.body.patientId,\n    date: req.body.date,\n    value: req.body.step,\n    distance: req.body.distance\n  };\n  models.patientWalkingStep\n    .findOne({\n      where: {\n        patientId: req.body.patientId,\n        date: req.body.date\n      }\n    })\n    .then(function(obj) {\n      if (obj) {\n        // update\n        obj.update(value);\n        res.json({\n          status: \"update\"\n        });\n      } else {\n        // insert\n        models.patientWalkingStep.create(value);\n        res.json({\n          status: \"create\"\n        });\n      }\n    });\n}\n"]}