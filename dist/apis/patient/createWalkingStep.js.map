{"version":3,"sources":["../../../src/apis/patient/createWalkingStep.js"],"names":["createWalkingStep","req","res","next","value","patientId","body","date","step","patientWalkingStep","findOne","where","then","obj","json","status","update","values","create"],"mappings":";;;;;kBAEwBA,iB;;AAFxB;;;;;;AAEe,SAASA,iBAAT,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C;AACxD,MAAIC,QAAQ;AACVC,eAAWJ,IAAIK,IAAJ,CAASD,SADV;AAEVE,UAAMN,IAAIK,IAAJ,CAASC,IAFL;AAGVH,WAAOH,IAAIK,IAAJ,CAASE;AAHN,GAAZ;AAKA,mBAAOC,kBAAP,CACGC,OADH,CACW;AACPC,WAAO;AACLN,iBAAWJ,IAAIK,IAAJ,CAASD,SADf;AAELE,YAAMN,IAAIK,IAAJ,CAASC;AAFV;AADA,GADX,EAOGK,IAPH,CAOQ,UAASC,GAAT,EAAc;AAClB,QAAIA,GAAJ,EAAS;AACP;AACAX,UAAIY,IAAJ,CAAS;AACPC,gBAAQ;AADD,OAAT;AAGAF,UAAIG,MAAJ,CAAWC,MAAX;AACD,KAND,MAMO;AACL;AACA,uBAAOR,kBAAP,CAA0BS,MAA1B,CAAiCD,MAAjC;AACAf,UAAIY,IAAJ,CAAS;AACPC,gBAAQ;AADD,OAAT;AAGD;AACF,GArBH;AAsBD","file":"createWalkingStep.js","sourcesContent":["import models from \"../../../models\";\n\nexport default function createWalkingStep(req, res, next) {\n  let value = {\n    patientId: req.body.patientId,\n    date: req.body.date,\n    value: req.body.step\n  };\n  models.patientWalkingStep\n    .findOne({\n      where: {\n        patientId: req.body.patientId,\n        date: req.body.date\n      }\n    })\n    .then(function(obj) {\n      if (obj) {\n        // update\n        res.json({\n          status: \"update\"\n        });\n        obj.update(values);\n      } else {\n        // insert\n        models.patientWalkingStep.create(values);\n        res.json({\n          status: \"create\"\n        });\n      }\n    });\n}\n"]}