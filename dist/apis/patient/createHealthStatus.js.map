{"version":3,"sources":["../../../src/apis/patient/createHealthStatus.js"],"names":["createHealthStatus","req","res","next","value","patientId","body","date","step","distance","patientHealthStatus","findOne","where","then","obj","update","json","status","create"],"mappings":";;;;;kBAEwBA,kB;;AAFxB;;;;;;AAEe,SAASA,kBAAT,CAA4BC,GAA5B,EAAiCC,GAAjC,EAAsCC,IAAtC,EAA4C;AACzD,MAAIC,QAAQ;AACVC,eAAWJ,IAAIK,IAAJ,CAASD,SADV;AAEVE,UAAMN,IAAIK,IAAJ,CAASC,IAFL;AAGVH,WAAOH,IAAIK,IAAJ,CAASF,KAHN;AAIVI,UAAMP,IAAIK,IAAJ,CAASE,IAJL;AAKVC,cAAUR,IAAIK,IAAJ,CAASG;AALT,GAAZ;AAOA,mBAAOC,mBAAP,CACGC,OADH,CACW;AACPC,WAAO;AACLP,iBAAWJ,IAAIK,IAAJ,CAASD,SADf;AAELE,YAAMN,IAAIK,IAAJ,CAASC;AAFV;AADA,GADX,EAOGM,IAPH,CAOQ,UAASC,GAAT,EAAc;AAClB,QAAIA,GAAJ,EAAS;AACP;AACAA,UAAIC,MAAJ,CAAWX,KAAX;AACAF,UAAIc,IAAJ,CAAS;AACPC,gBAAQ;AADD,OAAT;AAGD,KAND,MAMO;AACL;AACA,uBAAOP,mBAAP,CAA2BQ,MAA3B,CAAkCd,KAAlC;AACAF,UAAIc,IAAJ,CAAS;AACPC,gBAAQ;AADD,OAAT;AAGD;AACF,GArBH;AAsBD","file":"createHealthStatus.js","sourcesContent":["import models from \"../../../models\";\n\nexport default function createHealthStatus(req, res, next) {\n  let value = {\n    patientId: req.body.patientId,\n    date: req.body.date,\n    value: req.body.value,\n    step: req.body.step,\n    distance: req.body.distance\n  };\n  models.patientHealthStatus\n    .findOne({\n      where: {\n        patientId: req.body.patientId,\n        date: req.body.date\n      }\n    })\n    .then(function(obj) {\n      if (obj) {\n        // update\n        obj.update(value);\n        res.json({\n          status: \"update\"\n        });\n      } else {\n        // insert\n        models.patientHealthStatus.create(value);\n        res.json({\n          status: \"create\"\n        });\n      }\n    });\n}\n"]}